<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Jogo de dedu√ß√£o social por palavras - Descubra quem √© o impostor!">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="O Impostor">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-192.png">
    <link rel="shortcut icon" href="icon-192.png">
    <title>O Impostor - Jogo de Dedu√ß√£o</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg-dark:#0a0a0f;--bg-card:#12121a;--accent:#ff3366;--accent-glow:rgba(255,51,102,0.4);--success:#00ff88;--warning:#ffaa00;--text:#fff;--text-dim:#666680;--border:#2a2a3a}
        *{margin:0;padding:0;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}
        body{font-family:'Space Mono',monospace;background:var(--bg-dark);color:var(--text);min-height:100vh;min-height:100dvh;overflow-x:hidden}
        .bg-pattern{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 80%,rgba(255,51,102,0.1) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(0,255,136,0.08) 0%,transparent 50%),linear-gradient(180deg,#0a0a0f 0%,#0f0f18 100%);z-index:-1}
        .container{max-width:480px;margin:0 auto;padding:20px;padding-bottom:40px;min-height:100vh}
        .logo{text-align:center;padding:25px 0 20px;display:flex;flex-direction:column;align-items:center;gap:10px}
        .logo-icon{width:80px;height:80px;border-radius:20px;box-shadow:0 8px 30px var(--accent-glow)}
        .logo h1{font-family:'Bebas Neue',sans-serif;font-size:3.2rem;letter-spacing:6px;background:linear-gradient(135deg,var(--accent) 0%,#ff6699 50%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:pulse-glow 3s ease-in-out infinite}
        .logo .subtitle{font-size:.65rem;color:var(--text-dim);letter-spacing:3px;text-transform:uppercase;max-width:250px;line-height:1.4}
        .mini-logo{display:flex;align-items:center;justify-content:center;gap:10px;padding:15px 0}
        .mini-logo img{width:40px;height:40px;border-radius:10px}
        .mini-logo h1{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:3px;color:var(--text-dim)}
        .settings-btn{position:absolute;top:20px;right:20px;width:40px;height:40px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.05);color:var(--text-dim);font-size:1.2rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
        .settings-btn:hover{border-color:var(--accent);color:var(--accent)}
        .back-btn{position:absolute;top:20px;left:20px;width:40px;height:40px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,0.05);color:var(--text-dim);font-size:1.2rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}
        .back-btn:hover{border-color:var(--accent);color:var(--accent)}
        @keyframes pulse-glow{0%,100%{filter:brightness(1)}50%{filter:brightness(1.2)}}
        .card{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:20px;position:relative;overflow:hidden}
        .card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),transparent)}
        .card-title{font-family:'Bebas Neue',sans-serif;font-size:1.4rem;letter-spacing:2px;margin-bottom:14px;color:var(--text)}
        input[type="text"],input[type="number"]{width:100%;padding:12px 16px;background:rgba(255,255,255,0.05);border:2px solid var(--border);border-radius:12px;color:var(--text);font-family:'Space Mono',monospace;font-size:.95rem;transition:all .3s ease;margin-bottom:8px}
        input[type="text"]:focus,input[type="number"]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 20px var(--accent-glow)}
        input::placeholder{color:var(--text-dim)}
        .btn{width:100%;padding:16px 24px;border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:3px;cursor:pointer;transition:all .3s ease;-webkit-user-select:none;user-select:none}
        .btn-primary{background:linear-gradient(135deg,var(--accent) 0%,#cc2952 100%);color:#fff;box-shadow:0 8px 30px var(--accent-glow)}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 40px var(--accent-glow)}
        .btn-primary:active{transform:translateY(0)}
        .btn-secondary{background:transparent;border:2px solid var(--border);color:var(--text)}
        .btn-secondary:hover{border-color:var(--accent);color:var(--accent)}
        .btn-success{background:linear-gradient(135deg,var(--success) 0%,#00cc6a 100%);color:var(--bg-dark)}
        .btn-warning{background:linear-gradient(135deg,var(--warning) 0%,#cc8800 100%);color:var(--bg-dark)}
        .btn-danger{background:transparent;border:1px solid #ff4444;color:#ff4444;font-size:.8rem;padding:10px;opacity:.6}
        .btn-danger:hover{opacity:1}
        .btn+.btn{margin-top:12px}
        .btn:disabled{opacity:.5;cursor:not-allowed;transform:none!important}
        .player-config{display:flex;align-items:center;gap:8px;padding:8px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:6px}
        .player-config .player-number{width:28px;height:28px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue',sans-serif;font-size:.9rem;color:#fff;flex-shrink:0}
        .player-config input{flex:1;margin-bottom:0;padding:8px 12px;font-size:.9rem}
        .number-selector{display:flex;gap:5px;justify-content:center;flex-wrap:wrap;margin:10px 0}
        .number-btn{width:40px;height:40px;border-radius:10px;border:2px solid var(--border);background:rgba(255,255,255,0.03);color:var(--text);font-family:'Bebas Neue',sans-serif;font-size:1.1rem;cursor:pointer;transition:all .2s ease}
        .number-btn:hover{border-color:var(--accent)}
        .number-btn.selected{border-color:var(--accent);background:var(--accent);color:#fff}
        .game-info{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:16px 0}
        .info-box{background:rgba(255,255,255,0.03);padding:14px;border-radius:12px;text-align:center}
        .info-label{font-size:.6rem;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
        .info-value{font-family:'Bebas Neue',sans-serif;font-size:1.4rem;color:var(--text)}
        .word-container{text-align:center;padding:25px 15px}
        .word-text{font-family:'Bebas Neue',sans-serif;font-size:2.3rem;letter-spacing:3px;margin-bottom:14px;line-height:1.2}
        .word-text.is-word{color:var(--success);text-shadow:0 0 40px rgba(0,255,136,0.5)}
        .word-text.is-impostor{color:var(--accent);text-shadow:0 0 40px var(--accent-glow)}
        .word-hidden{font-size:3rem;color:var(--text-dim)}
        .category-tag{display:inline-block;padding:8px 20px;background:rgba(255,255,255,0.1);border:1px solid var(--border);border-radius:30px;font-size:.7rem;letter-spacing:2px;color:var(--text-dim);text-transform:uppercase;margin-top:10px}
        .player-turn-card{text-align:center;padding:30px 20px;background:linear-gradient(135deg,rgba(255,51,102,0.1) 0%,rgba(0,0,0,0) 100%);border:2px solid var(--accent);border-radius:16px;margin-bottom:20px}
        .player-turn-name{font-family:'Bebas Neue',sans-serif;font-size:2.3rem;color:var(--accent);letter-spacing:4px;margin-bottom:8px}
        .player-turn-instruction{font-size:.75rem;color:var(--text-dim)}
        .screen{display:none;animation:fade-in .4s ease-out}
        .screen.active{display:block}
        @keyframes fade-in{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .word-reveal-animation{animation:reveal-word .5s ease-out}
        @keyframes reveal-word{0%{transform:scale(0.8);opacity:0}50%{transform:scale(1.05)}100%{transform:scale(1);opacity:1}}
        .toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--bg-card);border:1px solid var(--border);padding:14px 22px;border-radius:12px;font-size:.8rem;opacity:0;transition:all .3s ease;z-index:1000;max-width:90%;text-align:center}
        .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
        .players-summary{display:flex;flex-wrap:wrap;gap:6px;margin-top:10px}
        .player-chip{padding:5px 10px;background:rgba(255,255,255,0.05);border-radius:20px;font-size:.7rem;border:1px solid var(--border);cursor:default}
        .player-chip.current{border-color:var(--accent);background:rgba(255,51,102,0.15)}
        .player-chip.seen{border-color:var(--success);background:rgba(0,255,136,0.1)}
        .player-chip.eliminated{opacity:.4;text-decoration:line-through}
        .player-chip.host{border-color:var(--warning);background:rgba(255,170,0,0.1)}
        .player-chip.you{border-color:var(--success)}
        .confirm-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}
        .confirm-box{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:24px;max-width:400px;width:100%;text-align:center;animation:reveal-word .3s ease-out;max-height:90vh;overflow-y:auto}
        .confirm-box h3{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;margin-bottom:14px;color:var(--accent);letter-spacing:2px}
        .ranking-list{list-style:none;margin:14px 0}
        .ranking-item{display:flex;align-items:center;padding:10px 12px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:6px;border:1px solid transparent}
        .ranking-item.gold{border-color:#ffd700;background:rgba(255,215,0,0.1)}
        .ranking-item.silver{border-color:#c0c0c0;background:rgba(192,192,192,0.08)}
        .ranking-item.bronze{border-color:#cd7f32;background:rgba(205,127,50,0.08)}
        .ranking-position{width:26px;height:26px;border-radius:50%;background:var(--border);display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue',sans-serif;font-size:.85rem;margin-right:10px;flex-shrink:0}
        .ranking-item.gold .ranking-position{background:#ffd700;color:#000}
        .ranking-item.silver .ranking-position{background:#c0c0c0;color:#000}
        .ranking-item.bronze .ranking-position{background:#cd7f32;color:#000}
        .ranking-name{flex:1;font-size:.8rem}
        .ranking-score{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;color:var(--success)}
        .ranking-score.negative{color:#ff4444}
        .score-controls{margin:16px 0}
        .score-player{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:6px}
        .score-player-name{font-size:.8rem;flex:1}
        .score-btns{display:flex;gap:6px;align-items:center}
        .score-btn{width:32px;height:32px;border-radius:8px;border:none;font-size:1.1rem;cursor:pointer;transition:all .2s}
        .score-btn.minus{background:rgba(255,68,68,0.2);color:#ff4444}
        .score-btn.plus{background:rgba(0,255,136,0.2);color:var(--success)}
        .score-btn:hover{transform:scale(1.1)}
        .score-value{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;min-width:36px;text-align:center}
        .section-title{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:2px;color:var(--text-dim);margin:16px 0 10px;padding-bottom:6px;border-bottom:1px solid var(--border)}
        .danger-zone{margin-top:30px;padding-top:16px;border-top:1px dashed var(--border);opacity:.7}
        .impostor-count-info{font-size:.65rem;color:var(--text-dim);text-align:center;margin-top:6px}
        .result-icon{font-size:3.5rem;margin-bottom:14px}
        .player-vote-list{display:flex;flex-direction:column;gap:6px}
        .player-vote-btn{padding:12px 16px;background:rgba(255,255,255,0.05);border:2px solid var(--border);border-radius:12px;color:var(--text);font-family:'Space Mono',monospace;font-size:.85rem;cursor:pointer;transition:all .2s;text-align:left}
        .player-vote-btn:hover{border-color:var(--accent);background:rgba(255,51,102,0.1)}
        .player-vote-btn.eliminated{opacity:.4;pointer-events:none;text-decoration:line-through}
        .player-vote-btn.selected{border-color:var(--success);background:rgba(0,255,136,0.1)}
        .toggle-option{display:flex;align-items:center;justify-content:space-between;padding:12px;background:rgba(255,255,255,0.03);border-radius:12px;margin-bottom:10px}
        .toggle-option span{font-size:.8rem;flex:1}
        .toggle-switch{width:50px;height:28px;background:var(--border);border-radius:14px;position:relative;cursor:pointer;transition:all .3s}
        .toggle-switch.active{background:var(--accent)}
        .toggle-switch::after{content:'';position:absolute;width:22px;height:22px;background:#fff;border-radius:50%;top:3px;left:3px;transition:all .3s}
        .toggle-switch.active::after{left:25px}
        .lang-selector{display:flex;gap:8px;justify-content:center;margin:20px 0}
        .lang-btn{flex:1;max-width:110px;padding:14px 8px;background:rgba(255,255,255,0.05);border:2px solid var(--border);border-radius:12px;color:var(--text);font-family:'Space Mono',monospace;font-size:.7rem;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;gap:6px}
        .lang-btn:hover{border-color:var(--accent)}
        .lang-btn .flag{font-size:1.8rem}
        .mode-selector{display:flex;flex-direction:column;gap:12px;margin:20px 0}
        .mode-btn{padding:20px;background:rgba(255,255,255,0.05);border:2px solid var(--border);border-radius:16px;color:var(--text);cursor:pointer;transition:all .2s;text-align:left}
        .mode-btn:hover{border-color:var(--accent);background:rgba(255,51,102,0.05)}
        .mode-btn .mode-icon{font-size:2rem;margin-bottom:10px}
        .mode-btn .mode-title{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:2px;margin-bottom:6px}
        .mode-btn .mode-desc{font-size:.7rem;color:var(--text-dim);line-height:1.4}
        .room-code{font-family:'Bebas Neue',sans-serif;font-size:3rem;letter-spacing:8px;color:var(--accent);text-align:center;padding:20px;background:rgba(255,51,102,0.1);border-radius:16px;margin:16px 0}
        .qr-container{text-align:center;padding:20px;background:rgba(255,255,255,0.05);border-radius:16px;margin:16px 0}
        .qr-container canvas{border-radius:12px}
        .players-list{margin:16px 0}
        .player-item{display:flex;align-items:center;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:8px;border:1px solid var(--border)}
        .player-item.host{border-color:var(--warning)}
        .player-item.you{border-color:var(--success)}
        .player-avatar{width:36px;height:36px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;font-family:'Bebas Neue',sans-serif;font-size:1rem;margin-right:12px}
        .player-name{flex:1;font-size:.9rem}
        .player-badge{font-size:.6rem;padding:4px 8px;border-radius:10px;background:var(--warning);color:#000;font-family:'Bebas Neue',sans-serif;letter-spacing:1px}
        .waiting-dots{display:inline-block}
        .waiting-dots::after{content:'...';animation:dots 1.5s infinite}
        @keyframes dots{0%,20%{content:'.'}40%{content:'..'}60%,100%{content:'...'}}
        .category-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin:12px 0;max-height:300px;overflow-y:auto}
        .category-item{padding:10px;background:rgba(255,255,255,0.03);border:2px solid var(--border);border-radius:10px;font-size:.7rem;cursor:pointer;transition:all .2s;text-align:center}
        .category-item:hover{border-color:var(--accent)}
        .category-item.selected{border-color:var(--success);background:rgba(0,255,136,0.1)}
        .status-indicator{width:10px;height:10px;border-radius:50%;background:var(--success);margin-left:8px;animation:pulse 2s infinite}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
        .status-indicator.waiting{background:var(--warning)}
        .status-indicator.offline{background:#ff4444}
        .vote-status{font-size:.6rem;color:var(--text-dim);margin-left:auto}
        .countdown{font-family:'Bebas Neue',sans-serif;font-size:4rem;color:var(--accent);text-align:center;margin:20px 0}
        .kick-btn{width:24px;height:24px;border-radius:50%;border:1px solid #ff4444;background:transparent;color:#ff4444;font-size:.8rem;cursor:pointer;margin-left:8px;opacity:.6;transition:all .2s}
        .kick-btn:hover{opacity:1;background:rgba(255,68,68,0.2)}
        .room-header{position:fixed;top:0;left:0;right:0;height:50px;background:var(--bg-dark);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 15px;z-index:100}
        .room-header-left{display:flex;align-items:center;gap:10px}
        .room-header-code{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:2px;color:var(--accent);cursor:pointer;padding:6px 12px;background:rgba(255,51,102,0.1);border-radius:8px;border:1px solid var(--accent);display:flex;align-items:center;gap:6px}
        .room-header-code:hover{background:rgba(255,51,102,0.2)}
        .room-header-right{display:flex;align-items:center;gap:10px}
        .profile-btn{width:36px;height:36px;border-radius:50%;border:1px solid var(--border);background:rgba(255,255,255,0.05);color:var(--text);font-size:1rem;cursor:pointer;display:flex;align-items:center;justify-content:center}
        .profile-btn:hover{border-color:var(--accent);color:var(--accent)}
        .leave-btn{width:36px;height:36px;border-radius:8px;border:1px solid #ff4444;background:transparent;color:#ff4444;font-size:.9rem;cursor:pointer}
        .leave-btn:hover{background:rgba(255,68,68,0.2)}
        .qr-wrapper{background:#fff;padding:15px;border-radius:12px;display:inline-block}
        .screen-with-header{padding-top:60px!important}
        @media(max-width:380px){.logo h1{font-size:2.6rem}.logo-icon{width:60px;height:60px}.word-text{font-size:1.9rem}.player-turn-name{font-size:1.9rem}.container{padding:15px}.number-btn{width:36px;height:36px;font-size:1rem}.room-code{font-size:2.5rem;letter-spacing:6px}}
        .install-banner{position:fixed;bottom:0;left:0;right:0;background:var(--bg-card);border-top:1px solid var(--border);padding:14px 18px;display:none;align-items:center;gap:10px;z-index:999}
        .install-banner.show{display:flex}
        .install-banner p{flex:1;font-size:.75rem;color:var(--text-dim)}
        .install-banner button{padding:8px 16px;border-radius:8px;border:none;font-family:'Bebas Neue',sans-serif;font-size:.9rem;cursor:pointer}
        .install-btn{background:var(--accent);color:#fff}
        .close-install{background:transparent;color:var(--text-dim)}
        .connection-status{position:fixed;top:10px;left:50%;transform:translateX(-50%);padding:6px 12px;border-radius:20px;font-size:.65rem;z-index:999;display:none}
        .connection-status.connected{display:block;background:rgba(0,255,136,0.2);color:var(--success);border:1px solid var(--success)}
        .connection-status.disconnected{display:block;background:rgba(255,68,68,0.2);color:#ff4444;border:1px solid #ff4444}
        .connection-status.connecting{display:block;background:rgba(255,170,0,0.2);color:var(--warning);border:1px solid var(--warning)}
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div id="connection-status" class="connection-status"></div>
    <div class="container">
        <!-- LANGUAGE SELECT SCREEN -->
        <div id="screen-lang" class="screen">
            <div class="logo" style="padding-top:60px">
                <img src="icon-192.png" alt="O Impostor" class="logo-icon">
                <h1>O IMPOSTOR</h1>
            </div>
            <div class="card" style="margin-top:30px">
                <h2 class="card-title" style="text-align:center">üåç Select Language</h2>
                <div class="lang-selector">
                    <button class="lang-btn" onclick="setLanguage('pt')"><span class="flag">üáßüá∑</span>Portugu√™s</button>
                    <button class="lang-btn" onclick="setLanguage('en')"><span class="flag">üá∫üá∏</span>English</button>
                    <button class="lang-btn" onclick="setLanguage('es')"><span class="flag">üá™üá∏</span>Espa√±ol</button>
                </div>
            </div>
        </div>

        <!-- MODE SELECT SCREEN -->
        <div id="screen-mode" class="screen">
            <div class="logo">
                <img src="icon-192.png" alt="O Impostor" class="logo-icon">
                <h1 data-i18n="title">O IMPOSTOR</h1>
                <p class="subtitle" data-i18n="subtitle">Jogo de dedu√ß√£o social por palavras</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="chooseMode">üéÆ Escolha o Modo</h2>
                <div class="mode-selector">
                    <button class="mode-btn" onclick="selectMode('local')">
                        <div class="mode-icon">üì±</div>
                        <div class="mode-title" data-i18n="localMode">MODO LOCAL</div>
                        <div class="mode-desc" data-i18n="localModeDesc">Um √∫nico dispositivo. Passe o celular entre os jogadores. Ideal para jogar presencialmente.</div>
                    </button>
                    <button class="mode-btn" onclick="selectMode('online')">
                        <div class="mode-icon">üåê</div>
                        <div class="mode-title" data-i18n="onlineMode">MODO ONLINE</div>
                        <div class="mode-desc" data-i18n="onlineModeDesc">Cada jogador usa seu pr√≥prio dispositivo. Conecte-se na mesma sala. Ideal para jogar √† dist√¢ncia.</div>
                    </button>
                </div>
            </div>
            <button class="settings-btn" onclick="showSettings()">‚öôÔ∏è</button>
        </div>

        <!-- LOCAL MODE: HOME SCREEN -->
        <div id="screen-home" class="screen">
            <button class="back-btn" onclick="showScreen('screen-mode')">‚Üê</button>
            <button class="settings-btn" onclick="showSettings()">‚öôÔ∏è</button>
            <div class="logo">
                <img src="icon-192.png" alt="O Impostor" class="logo-icon">
                <h1 data-i18n="title">O IMPOSTOR</h1>
                <p class="subtitle" data-i18n="localMode">MODO LOCAL</p>
            </div>
            <div class="card"><h2 class="card-title" data-i18n="players">üë• Jogadores</h2><div class="number-selector" id="player-selector"></div></div>
            <div class="card"><h2 class="card-title" data-i18n="maxImpostors">üé≠ M√°x. Impostores</h2><div class="number-selector" id="impostor-selector"></div><p class="impostor-count-info" data-i18n="impostorInfo">Pode ter de 1 at√© o m√°ximo selecionado</p></div>
            <div class="card">
                <h2 class="card-title" data-i18n="impostorMode">üîÆ Modo Impostor</h2>
                <div class="toggle-option">
                    <span data-i18n="impostorKnows">Impostor sabe que √© impostor</span>
                    <div class="toggle-switch active" id="toggle-impostor-knows" onclick="toggleImpostorKnows()"></div>
                </div>
                <p class="impostor-count-info" data-i18n="impostorModeInfo">Se desativado, impostor recebe palavra similar</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="maxPoints">üèÜ Pontua√ß√£o M√°xima</h2>
                <input type="number" id="max-points-input" placeholder="‚àû Sem limite" min="1" max="100">
                <p class="impostor-count-info" data-i18n="maxPointsInfo">Deixe vazio para jogar sem limite de pontos</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="categories">üìÇ Categorias</h2>
                <div class="toggle-option">
                    <span data-i18n="allCategories">Todas as categorias</span>
                    <div class="toggle-switch active" id="toggle-all-categories" onclick="toggleAllCategories()"></div>
                </div>
                <div id="categories-list" class="category-grid" style="display:none"></div>
            </div>
            <div class="card"><h2 class="card-title" data-i18n="names">üìù Nomes</h2><div id="player-inputs"></div></div>
            <button class="btn btn-primary" onclick="startLocalGame()" data-i18n="startGame">üéÆ INICIAR JOGO</button>
            <div class="card" style="margin-top:25px;opacity:.8"><h2 class="card-title" data-i18n="howToPlay">üìñ Como Jogar</h2><p style="font-size:.68rem;line-height:1.8;color:var(--text-dim)" data-i18n="instructions"></p></div>
        </div>

        <!-- LOCAL MODE: TURN SCREEN -->
        <div id="screen-turn" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1><span data-i18n="round">RODADA</span> <span id="turn-round-num">1</span></h1></div>
            <div class="player-turn-card"><div class="player-turn-name" id="current-player-name">JOGADOR</div><p class="player-turn-instruction" data-i18n="pickUpPhone">Pegue o celular e veja sua palavra</p></div>
            <div class="card"><h2 class="card-title" data-i18n="progress">üìã Progresso</h2><div class="players-summary" id="players-progress"></div></div>
            <button class="btn btn-primary" onclick="showWord()" data-i18n="seeWord">üëÅÔ∏è VER MINHA PALAVRA</button>
        </div>

        <!-- LOCAL MODE: WORD SCREEN -->
        <div id="screen-word" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="yourMission">SUA MISS√ÉO</h1></div>
            <div class="card"><div class="word-container"><div id="word-display" class="word-reveal-animation"><div class="word-text" id="word-text"></div><div class="category-tag" id="category-tag"></div></div></div></div>
            <p style="text-align:center;color:var(--text-dim);font-size:.7rem;margin-bottom:18px" data-i18n="memorizePass">Memorize e passe o celular</p>
            <button class="btn btn-success" onclick="nextPlayer()" data-i18n="gotItNext">‚úì ENTENDI, PR√ìXIMO</button>
        </div>

        <!-- LOCAL MODE: GAME SCREEN -->
        <div id="screen-game" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1><span data-i18n="round">RODADA</span> <span id="game-round-num">1</span></h1></div>
            <div class="game-info"><div class="info-box"><div class="info-label" data-i18n="playersLabel">Jogadores</div><div class="info-value" id="total-players">4</div></div><div class="info-box"><div class="info-label" data-i18n="impostorsLabel">Impostores</div><div class="info-value" style="color:var(--accent)" id="impostor-count-display">1-2</div></div></div>
            <div class="card">
                <h2 class="card-title" data-i18n="timeToPlay">üé≠ Hora de Jogar!</h2>
                <div id="starter-player-info" style="background:var(--bg-card);padding:12px;border-radius:10px;text-align:center;margin:12px 0;font-weight:600;border:2px solid var(--primary)"></div>
                <p style="font-size:.75rem;color:var(--text-dim);line-height:1.5" data-i18n="playInstructions">Cada um fala uma palavra relacionada. Quando suspeitarem de algu√©m, votem!</p>
                <div class="players-summary" id="game-players" style="margin-top:14px"></div>
            </div>
            <button class="btn btn-warning" onclick="showVoteScreen()" data-i18n="chooseImpostor">üó≥Ô∏è ESCOLHER IMPOSTOR</button>
            <button class="btn btn-secondary" onclick="showRanking()" data-i18n="seeRanking">üèÜ VER RANKING</button>
            <div class="danger-zone"><button class="btn btn-danger" onclick="confirmNewGame()" data-i18n="restartGame">REINICIAR JOGO</button></div>
        </div>

        <!-- LOCAL MODE: RANKING SCREEN -->
        <div id="screen-ranking" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1>üèÜ RANKING</h1></div>
            <div class="card"><ul class="ranking-list" id="ranking-list"></ul></div>
            <button class="btn btn-secondary" onclick="showGameScreen()" data-i18n="back">‚Üê VOLTAR</button>
        </div>

        <!-- ONLINE MODE: CREATE/JOIN SCREEN -->
        <div id="screen-online-menu" class="screen">
            <button class="back-btn" onclick="showScreen('screen-mode')">‚Üê</button>
            <div class="logo">
                <img src="icon-192.png" alt="O Impostor" class="logo-icon">
                <h1 data-i18n="title">O IMPOSTOR</h1>
                <p class="subtitle" data-i18n="onlineMode">MODO ONLINE</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="yourName">üë§ Seu Nome</h2>
                <input type="text" id="online-player-name" placeholder="Digite seu nome" maxlength="15">
            </div>
            <button class="btn btn-primary" onclick="createRoom()" data-i18n="createRoom">üè† CRIAR SALA</button>
            <button class="btn btn-secondary" onclick="showJoinRoom()" data-i18n="joinRoom">üö™ ENTRAR EM SALA</button>
        </div>

        <!-- ONLINE MODE: CREATE ROOM SETTINGS -->
        <div id="screen-create-room" class="screen">
            <button class="back-btn" onclick="showScreen('screen-online-menu')">‚Üê</button>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="roomSettings">CONFIGURAR SALA</h1></div>
            <div class="card">
                <h2 class="card-title" data-i18n="roomLanguage">üåç Idioma da Sala</h2>
                <div class="lang-selector">
                    <button class="lang-btn" id="room-lang-pt" onclick="setRoomLanguage('pt')"><span class="flag">üáßüá∑</span>PT</button>
                    <button class="lang-btn" id="room-lang-en" onclick="setRoomLanguage('en')"><span class="flag">üá∫üá∏</span>EN</button>
                    <button class="lang-btn" id="room-lang-es" onclick="setRoomLanguage('es')"><span class="flag">üá™üá∏</span>ES</button>
                </div>
            </div>
            <div class="card"><h2 class="card-title" data-i18n="maxImpostors">üé≠ M√°x. Impostores</h2><div class="number-selector" id="room-impostor-selector"></div></div>
            <div class="card">
                <h2 class="card-title" data-i18n="impostorMode">üîÆ Modo Impostor</h2>
                <div class="toggle-option">
                    <span data-i18n="impostorKnows">Impostor sabe que √© impostor</span>
                    <div class="toggle-switch active" id="room-toggle-impostor-knows" onclick="toggleRoomImpostorKnows()"></div>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="maxPoints">üèÜ Pontua√ß√£o M√°xima</h2>
                <input type="number" id="room-max-points" placeholder="‚àû Sem limite" min="1" max="100">
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="categories">üìÇ Categorias</h2>
                <div class="toggle-option">
                    <span data-i18n="allCategories">Todas as categorias</span>
                    <div class="toggle-switch active" id="room-toggle-all-categories" onclick="toggleRoomAllCategories()"></div>
                </div>
                <div id="room-categories-list" class="category-grid" style="display:none"></div>
            </div>
            <button class="btn btn-primary" onclick="confirmCreateRoom()" data-i18n="createRoom">üè† CRIAR SALA</button>
        </div>

        <!-- ONLINE MODE: JOIN ROOM -->
        <div id="screen-join-room" class="screen">
            <button class="back-btn" onclick="showScreen('screen-online-menu')">‚Üê</button>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="joinRoom">ENTRAR NA SALA</h1></div>
            <div class="card">
                <h2 class="card-title" data-i18n="roomCode">üîë C√≥digo da Sala</h2>
                <input type="text" id="join-room-code" placeholder="ABCD" maxlength="4" style="text-transform:uppercase;text-align:center;font-size:1.5rem;letter-spacing:8px">
            </div>
            <button class="btn btn-primary" onclick="joinRoom()" data-i18n="enter">üö™ ENTRAR</button>
        </div>

        <!-- ONLINE MODE: LOBBY -->
        <div id="screen-lobby" class="screen screen-with-header">
            <div id="room-header-lobby" class="room-header"></div>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="lobby">SALA DE ESPERA</h1></div>
            <div class="room-code" id="lobby-room-code">ABCD</div>
            <div class="qr-container" id="qr-container"><div class="qr-wrapper" id="qr-wrapper"></div></div>
            <p style="text-align:center;font-size:.7rem;color:var(--text-dim);margin-bottom:16px" data-i18n="shareCode">Compartilhe o c√≥digo ou QR Code com seus amigos</p>
            <div class="card">
                <h2 class="card-title"><span data-i18n="playersInRoom">Jogadores na Sala</span> (<span id="player-count">0</span>)</h2>
                <div id="lobby-players" class="players-list"></div>
            </div>
            <div id="host-controls" style="display:none">
                <button class="btn btn-primary" id="start-online-btn" onclick="startOnlineGame()" disabled data-i18n="startGame">üéÆ INICIAR JOGO</button>
            </div>
            <div id="guest-waiting" style="display:none">
                <p style="text-align:center;color:var(--text-dim);font-size:.85rem"><span data-i18n="waitingHost">Aguardando o host iniciar</span><span class="waiting-dots"></span></p>
            </div>
            <div class="danger-zone"><button class="btn btn-danger" onclick="leaveRoom()" data-i18n="leaveRoom">SAIR DA SALA</button></div>
        </div>

        <!-- ONLINE MODE: WORD SCREEN -->
        <div id="screen-online-word" class="screen screen-with-header">
            <div id="room-header-word" class="room-header"></div>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1><span data-i18n="round">RODADA</span> <span id="online-round-num">1</span></h1></div>
            <div class="card">
                <div class="word-container">
                    <div id="online-word-display">
                        <div class="word-text" id="online-word-text"></div>
                        <div class="category-tag" id="online-category-tag"></div>
                    </div>
                    <div id="word-hidden-container" style="display:none">
                        <div class="word-hidden">üîí</div>
                        <p style="text-align:center;color:var(--text-dim);font-size:.8rem;margin:10px 0" data-i18n="wordHidden">Palavra escondida</p>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="hideOnlineWord()" id="hide-word-btn" style="margin-top:16px" data-i18n="hideWord">üôà ESCONDER PALAVRA</button>
                <button class="btn btn-secondary" onclick="showOnlineWordAgain()" id="show-word-btn" style="display:none;margin-top:16px" data-i18n="showWord">üëÅÔ∏è MOSTRAR PALAVRA</button>
            </div>
            <div id="online-game-status" class="card" style="margin-top:20px">
                <h2 class="card-title" data-i18n="playersLabel">üë• Jogadores</h2>
                <div id="online-players-status" class="players-list"></div>
            </div>
            <div id="request-vote-control" style="display:none;margin-top:16px">
                <button class="btn btn-warning" id="request-vote-btn" onclick="requestVote()">üó≥Ô∏è SOLICITAR VOTA√á√ÉO</button>
                <p id="vote-request-status" style="text-align:center;font-size:.75rem;color:var(--text-dim);margin-top:8px"></p>
            </div>
        </div>

        <!-- ONLINE MODE: VOTING SCREEN -->
        <div id="screen-online-vote" class="screen screen-with-header">
            <div id="room-header-vote" class="room-header"></div>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="voting">üó≥Ô∏è VOTA√á√ÉO</h1></div>
            <div class="card">
                <h2 class="card-title" data-i18n="whoIsImpostor">Quem √© o Impostor?</h2>
                <div id="online-vote-list" class="player-vote-list"></div>
            </div>
            <div id="vote-waiting" style="display:none">
                <p style="text-align:center;color:var(--text-dim);font-size:.85rem;margin-top:20px"><span data-i18n="waitingVotes">Aguardando votos</span><span class="waiting-dots"></span></p>
                <div id="votes-progress" style="text-align:center;margin-top:10px"></div>
            </div>
        </div>

        <!-- ONLINE MODE: VOTE RESULT -->
        <div id="screen-online-result" class="screen screen-with-header">
            <div id="room-header-result" class="room-header"></div>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="result">üìä RESULTADO</h1></div>
            <div id="online-result-content" class="card"></div>
            <button class="btn btn-warning" onclick="continueOnlineVoting()" id="continue-voting-btn" data-i18n="continueVoting">üó≥Ô∏è CONTINUAR VOTANDO</button>
        </div>

        <!-- ONLINE MODE: ROUND END -->
        <div id="screen-online-round-end" class="screen screen-with-header">
            <div id="room-header-round-end" class="room-header"></div>
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="roundEnd">üèÅ FIM DA RODADA</h1></div>
            <div id="online-round-summary" class="card"></div>
            <div class="card">
                <h2 class="card-title">üèÜ RANKING</h2>
                <ul id="online-ranking-list" class="ranking-list"></ul>
            </div>
            <button class="btn btn-primary" onclick="readyNextRound()" id="ready-next-btn" data-i18n="ready">‚úì PRONTO</button>
            <div id="ready-status" style="text-align:center;margin-top:16px"></div>
        </div>

        <!-- ONLINE MODE: GAME OVER -->
        <div id="screen-online-game-over" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="gameOver">üéâ FIM DE JOGO</h1></div>
            <div class="card">
                <div class="result-icon">üèÜ</div>
                <h3 id="winner-name" style="font-size:1.5rem;color:var(--success)"></h3>
                <p style="color:var(--text-dim);margin-top:10px" data-i18n="reachedPoints">Alcan√ßou a pontua√ß√£o m√°xima!</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="finalRanking">üèÜ RANKING FINAL</h2>
                <ul id="final-ranking-list" class="ranking-list"></ul>
            </div>
            <div id="host-restart-controls" style="display:none">
                <button class="btn btn-primary" onclick="restartOnlineGame()" data-i18n="playAgain">üîÑ JOGAR NOVAMENTE</button>
            </div>
            <button class="btn btn-danger" onclick="leaveRoom()" data-i18n="leaveRoom">SAIR DA SALA</button>
        </div>

        <!-- LOCAL MODE: GAME OVER -->
        <div id="screen-game-over" class="screen">
            <div class="mini-logo"><img src="icon-192.png" alt=""><h1 data-i18n="gameOver">üéâ FIM DE JOGO</h1></div>
            <div class="card">
                <div class="result-icon">üèÜ</div>
                <h3 id="local-winner-name" style="font-size:1.5rem;color:var(--success)"></h3>
                <p style="color:var(--text-dim);margin-top:10px" data-i18n="reachedPoints">Alcan√ßou a pontua√ß√£o m√°xima!</p>
            </div>
            <div class="card">
                <h2 class="card-title" data-i18n="finalRanking">üèÜ RANKING FINAL</h2>
                <ul id="local-final-ranking" class="ranking-list"></ul>
            </div>
            <button class="btn btn-primary" onclick="resetGame()" data-i18n="playAgain">üîÑ JOGAR NOVAMENTE</button>
        </div>
    </div>
    <div class="toast" id="toast"></div>
    <div id="overlay-container"></div>
    <div class="install-banner" id="install-banner"><p data-i18n="installPrompt">Instale o app para jogar offline!</p><button class="close-install" onclick="closeInstallBanner()">‚úï</button><button class="install-btn" onclick="installApp()" data-i18n="install">INSTALAR</button></div>
    
    <!-- QR Code Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script src="i18n.js"></script>
    <script src="words-pt.js"></script>
    <script src="words-en.js"></script>
    <script src="words-es.js"></script>
    <script src="game-local.js"></script>
    <script src="game-online.js"></script>
    <script src="app.js"></script>
</body>
</html>
